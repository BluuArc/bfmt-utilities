"use strict";var bfmtUtilities=function(e){function a(e,a){const t=e&&Array.isArray(e.levels)?e.levels:[];let i;return t[i=null===a||isNaN(a)?t.length-1:+a-1]}function t(e){let a="";return e&&(a=e["proc id"]||e["unknown proc id"]||e["passive id"]||e["unknown passive id"]||""),a}var i,s;!function(e){e.BurstHeal="2",e.Unknown="UNKNOWN_PROC_EFFECT_ID"}(i||(i={})),function(e){e.TriggeredEffect="66",e.Unknown="UNKNOWN_PASSIVE_EFFECT_ID"}(s||(s={}));var n,r=Object.freeze({__proto__:null,get KNOWN_PROC_ID(){return i},get KNOWN_PASSIVE_ID(){return s}});!function(e){e.Attack="Attack"}(n||(n={}));const o=Object.freeze({1:{ID:"1",Name:"Parameter Boost"},2:{ID:"2",Name:"Elemental Parameter Boost"},3:{ID:"3",Name:"Type-Based Parameter Boost"},4:{ID:"4",Name:"Status Negation"},5:{ID:"5",Name:"Elemental Damage Reduction"},6:{ID:"6",Name:""},7:{ID:"7",Name:""},8:{ID:"8",Name:"Damage Reduction"},9:{ID:"9",Name:"Gradual BB Gauge Boost"},10:{ID:"10",Name:"HC Efficacy"},11:{ID:"11",Name:"HP-Conditional Parameter Boost"},12:{ID:"12",Name:"HP-Conditional Drop Rate Boost"},13:{ID:"13",Name:"BC Fill on Enemy Defeat"},14:{ID:"14",Name:"Damage Reduction (Chance)"},15:{ID:"15",Name:"Heal on Enemy Defeat"},16:{ID:"16",Name:"Heal on Battle Victory"},17:{ID:"17",Name:"HP Absorption"},19:{ID:"19",Name:"Drop Rate Boost"},20:{ID:"20",Name:"Status Infliction"},21:{ID:"21",Name:"Parameter Boost for First X Turns"},23:{ID:"23",Name:"BC Fill on Battle Victory"},24:{ID:"24",Name:"Heal when Attacked (Chance)"},25:{ID:"25",Name:"BC Fill when Hit (Chance)"},26:{ID:"26",Name:"Damage Counter (Chance)"},27:{ID:"27",Name:"Increased Target Chance"},28:{ID:"28",Name:"Decreased Target Chance"},29:{ID:"29",Name:"Defense Ignore (Chance)"},30:{ID:"30",Name:"BB Conditional Parameter Boost"},31:{ID:"31",Name:"Spark Damage Boost, Boost Drop Rate on Spark"},32:{ID:"32",Name:"BC Efficacy"},33:{ID:"33",Name:"Heal over Time"},34:{ID:"34",Name:"Critical Damage Boost"},35:{ID:"35",Name:"BC Fill when Normal Attacking"},36:{ID:"36",Name:"Extra Action"},37:{ID:"37",Name:"Hit Count Boost"},38:{ID:"38",Name:""},39:{ID:"39",Name:""},40:{ID:"40",Name:"Parameter Conversion"},41:{ID:"41",Name:"Unique Element Count Conditional Parameter Boost"},42:{ID:"42",Name:"Gender Parameter Boost"},43:{ID:"43",Name:"Damage Reduction to 1"},44:{ID:"44",Name:"Flat Parameter Boost"},45:{ID:"45",Name:"Critical Damage Negation"},46:{ID:"46",Name:"Parameter Boost Relative to HP Remainaing"},47:{ID:"47",Name:"BC Fill on Spark"},48:{ID:"48",Name:"BC Cost Reduction"},49:{ID:"49",Name:"BB Gauge Consumption Reduction"},50:{ID:"50",Name:"Elemental Damage Boost"},52:{ID:"52",Name:""},53:{ID:"53",Name:"Critical/Elemental Weakness Damage Negation"},55:{ID:"55",Name:"Conditional Effect based on HP Threshold"},58:{ID:"58",Name:"Damage Reduction when Guarding"},59:{ID:"59",Name:"BC Fill when Attacked when Guarding"},61:{ID:"61",Name:"BC Fill on Guard"},62:{ID:"62",Name:"Elemental Damage Reduction"},63:{ID:"63",Name:"Elemental Damage Reduction for first X Turns"},64:{ID:"64",Name:"BB Atk Boost"},65:{ID:"65",Name:"BC Fill on Critical"},66:{ID:"66",Name:"Add buff to Brave Burst"},69:{ID:"69",Name:"Chance KO Resistance (Angel Idol)"},70:{ID:"70",Name:"OD Gauge Fill Rate Boost"},71:{ID:"71",Name:"Status Counter"},72:{ID:"72",Name:"Turn End Effects Activate at Turn Start"},73:{ID:"73",Name:"Parameter Reduction Negation"},74:{ID:"74",Name:"Attack Boost on Status Afflicted Foes"},75:{ID:"75",Name:"Spark Vulnerability"},77:{ID:"77",Name:"Spark Damage Reduction"},78:{ID:"78",Name:"Conditional Effect after Damage Received Threshold"},79:{ID:"79",Name:"BC Fill after Damage Received Threshold"},80:{ID:"80",Name:"Conditional Effect after Damage Dealt Threshold"},81:{ID:"81",Name:"BC Fill after Damage Dealt Threshold"},82:{ID:"82",Name:"Conditional Effect after BC Received Threshold"},84:{ID:"84",Name:"Conditional Effect after HC Received Threshold"},85:{ID:"85",Name:"BC Fill after HC Received Threshold"},86:{ID:"86",Name:"Conditional Effect after Spark Threshold"},88:{ID:"88",Name:"Conditional Effect on Guard"},89:{ID:"89",Name:"Conditional Effect on Critical"},90:{ID:"90",Name:"Status Infliction on Critical"},91:{ID:"91",Name:""},92:{ID:"92",Name:"Negate Defense Ignore"},93:{ID:"93",Name:"Added Elements"},96:{ID:"96",Name:"Normal Attacks Hit All Foes"},97:{ID:"97",Name:"Player EXP Boost"},99:{ID:"99",Name:""},100:{ID:"100",Name:"Spark Critical"},101:{ID:"101",Name:"Heal on Spark"},102:{ID:"102",Name:"Added Elements"},103:{ID:"103",Name:"BB Atk Boost when HP Passes Threshold"},104:{ID:"104",Name:"Spark Boost when HP Passes Threshold"},105:{ID:"105",Name:"Turn-Based Parameter Boost"},106:{ID:"106",Name:"Conditional Effect after Activating Overdrive"},107:{ID:"107",Name:"Add Effect to Leader Skill"},109:{ID:"109",Name:"BB Gauge Reduction (Chance)"},110:{ID:"110",Name:"BC Efficacy Reduction (Chance)"},111:{ID:"111",Name:"Increase Brave Burst Activation Rate"},112:{ID:"112",Name:"ABP/CBP Boost"},113:{ID:"113",Name:"Conditional Effect after HP Threshold"},114:{ID:"114",Name:"Inflict Buff when Attacked"},127:{ID:"127",Name:"Additional Damage (Damage over Time) Reduction"},128:{ID:"128",Name:"Damage Reduction from Normal Attacks"},143:{ID:"143",Name:"Break Atk Parameter Limit"},10008:{ID:"10008",Name:"Damage Reduction from Specific Sources"},11004:{ID:"11004",Name:"Elemental Spark Damage Boost"},11005:{ID:"11005",Name:"Elemental Critical Damage Boost"},11006:{ID:"11006",Name:"Summoner EXP Boost"},11009:{ID:"11009",Name:"Effect Duration Boost"},"66,1":{ID:"66,1",Name:""}}),c=Object.freeze({0:{ID:"0",Name:"",Type:""},1:{ID:"1",Name:"Regular Damage",Type:"Attack"},2:{ID:"2",Name:"Burst Heal",Type:""},3:{ID:"3",Name:"Heal over Time",Type:""},4:{ID:"4",Name:"BB Gauge Refill",Type:""},5:{ID:"5",Name:"Parameter Boost",Type:""},6:{ID:"6",Name:"Drop Rate",Type:""},7:{ID:"7",Name:"Guaranteed KO Resistance (Angel Idol)",Type:""},8:{ID:"8",Name:"Max HP Boost",Type:""},9:{ID:"9",Name:"Parameter Reduction",Type:""},10:{ID:"10",Name:"Status Cleanse",Type:""},11:{ID:"11",Name:"Status Infliction",Type:""},12:{ID:"12",Name:"Revive (Guaranteed)",Type:""},13:{ID:"13",Name:"Random Target Damage",Type:"Attack"},14:{ID:"14",Name:"Lifesteal Damage",Type:"Attack"},16:{ID:"16",Name:"Elemental Damage Reduction",Type:""},17:{ID:"17",Name:"Status Negation",Type:""},18:{ID:"18",Name:"Damage Reduction",Type:""},19:{ID:"19",Name:"Gradual BB Gauge Boost",Type:""},20:{ID:"20",Name:"BC Fill on Hit",Type:""},22:{ID:"22",Name:"Defense Ignore",Type:""},23:{ID:"23",Name:"Spark Boost",Type:""},24:{ID:"24",Name:"Parameter Conversion",Type:""},26:{ID:"26",Name:"Hit Count Boost",Type:""},27:{ID:"27",Name:"Proportional Damage",Type:"Attack"},28:{ID:"28",Name:"Fixed Damage",Type:"Attack"},29:{ID:"29",Name:"Multi-Element Damage",Type:"Attack"},30:{ID:"30",Name:"Add Elements",Type:""},31:{ID:"31",Name:"Instant BB Gauge Fill",Type:""},32:{ID:"32",Name:"Element Shift",Type:""},33:{ID:"33",Name:"Buff Removal (Chance)",Type:""},34:{ID:"34",Name:"BB Gauge Reduction (Chance)",Type:""},36:{ID:"36",Name:"Leader Skill Lock (Chance)",Type:""},37:{ID:"37",Name:"Summon Unit",Type:""},38:{ID:"38",Name:"Status Cure",Type:""},39:{ID:"39",Name:"Elemental Damage Reduction",Type:""},40:{ID:"40",Name:"Status Infliction Added to Attack",Type:""},42:{ID:"42",Name:"",Type:""},43:{ID:"43",Name:"Instant OD Fill",Type:""},44:{ID:"44",Name:"Damage over Time (Additional Damage)",Type:""},45:{ID:"45",Name:"BB Atk Boost",Type:""},46:{ID:"46",Name:"Non-Lethal Proportional Damage",Type:"Attack"},47:{ID:"47",Name:"HP Scaled Damage",Type:"Attack"},48:{ID:"48",Name:"Piercing Proportional Damage",Type:"Attack"},49:{ID:"49",Name:"Retire",Type:""},50:{ID:"50",Name:"Damage Counter",Type:""},51:{ID:"51",Name:"Parameter Reduction Added to Attack",Type:""},52:{ID:"52",Name:"BC Efficacy",Type:""},53:{ID:"53",Name:"Status Counter",Type:""},54:{ID:"54",Name:"Critical Damage Boost",Type:""},55:{ID:"55",Name:"Elemental Damage Boost",Type:""},56:{ID:"56",Name:"Chance KO Resistance (Angel Idol)",Type:""},57:{ID:"57",Name:"BC Efficacy Reduction",Type:""},58:{ID:"58",Name:"Spark Vulnerability",Type:""},59:{ID:"59",Name:"BB Atk Reduction",Type:""},60:{ID:"60",Name:"",Type:""},61:{ID:"61",Name:"BB-Scaled Damage",Type:"Attack"},62:{ID:"62",Name:"Barrier",Type:""},63:{ID:"63",Name:"Selective Buff Wipe",Type:""},64:{ID:"64",Name:"Consecutive Damage",Type:"Attack"},65:{ID:"65",Name:"Attack Boost on Status Afflicted Foes",Type:""},66:{ID:"66",Name:"Revive (Chance)",Type:""},67:{ID:"67",Name:"BC Fill on Spark",Type:""},68:{ID:"68",Name:"Damage Reduction when Guarding",Type:""},69:{ID:"69",Name:"BC Fill on Guard",Type:""},70:{ID:"70",Name:"",Type:""},71:{ID:"71",Name:"BB Gauge Fill Rate Debuff",Type:""},73:{ID:"73",Name:"Parameter Reduction Negation",Type:""},75:{ID:"75",Name:"Element Squad-Scaled Damage",Type:"Attack"},76:{ID:"76",Name:"Extra Action",Type:""},78:{ID:"78",Name:"Self Parameter Boost",Type:""},79:{ID:"79",Name:"Player EXP Boost",Type:""},82:{ID:"82",Name:"",Type:""},83:{ID:"83",Name:"Spark Critical",Type:""},84:{ID:"84",Name:"OD Gauge Fill Rate",Type:""},85:{ID:"85",Name:"Heal when Attacked",Type:""},86:{ID:"86",Name:"HP Absorption",Type:""},87:{ID:"87",Name:"Heal on Spark",Type:""},88:{ID:"88",Name:"Self Spark Boost",Type:""},89:{ID:"89",Name:"Self Parameter Conversion",Type:""},92:{ID:"92",Name:"Self Max HP Boost",Type:""},93:{ID:"93",Name:"Spark/Critical/Elemental Weakness Damage Reduction",Type:""},94:{ID:"94",Name:"Normal Attacks Hit All Foes",Type:""},95:{ID:"95",Name:"Nullify Sphere Effects (Sphere Lock)",Type:""},96:{ID:"96",Name:"Nullify Extra Skill Effects (ES Lock)",Type:""},97:{ID:"97",Name:"Element Target Damage",Type:"Attack"},113:{ID:"113",Name:"Gradual OD Fill",Type:""},119:{ID:"119",Name:"Gradual BC Drain",Type:""},123:{ID:"123",Name:"OD Gauge Reduction",Type:""},126:{ID:"126",Name:"Damage over Time (Additional Damage) Mitigation",Type:""},127:{ID:"127",Name:"Lock On",Type:""},130:{ID:"130",Name:"Parameter Reduction Counter",Type:""},131:{ID:"131",Name:"",Type:""},132:{ID:"132",Name:"Critical/Elemental Weakness Vulnerability",Type:""},901:{ID:"901",Name:"Raid Heal (on Map)",Type:""},902:{ID:"902",Name:"Raid Parameter Boost",Type:""},903:{ID:"903",Name:"Raid Boss Reveal",Type:""},905:{ID:"905",Name:"Raid Teleport",Type:""},906:{ID:"906",Name:"Raid Flee",Type:""},907:{ID:"907",Name:"Raid Damage Reduction",Type:""},908:{ID:"908",Name:"Raid Item Drop Rate Boost",Type:""},1e4:{ID:"10000",Name:"Taunt",Type:""},10001:{ID:"10001",Name:"Stealth",Type:""},10002:{ID:"10002",Name:"Shield (old)",Type:""},10003:{ID:"10003",Name:"Nullify Sphere Effects (Sphere Lock)",Type:""},10004:{ID:"10004",Name:"Damage Immunity",Type:""},10005:{ID:"10005",Name:"Turn Skip (short duration)",Type:""},10006:{ID:"10006",Name:"Turn Skip (long duration)",Type:""},10007:{ID:"10007",Name:"Evasion",Type:""},10009:{ID:"10009",Name:"",Type:""},10012:{ID:"10012",Name:"OD Drain",Type:""},10015:{ID:"10015",Name:"Elemental Spark Boost",Type:""},10016:{ID:"10016",Name:"Element Critical Damage Boost",Type:""},10017:{ID:"10017",Name:"Elemental Shield",Type:""},10018:{ID:"10018",Name:"Max HP Reduction",Type:""},10019:{ID:"10019",Name:"Effect Purge",Type:""},10020:{ID:"10020",Name:"Piercing Damage",Type:"Attack"},10021:{ID:"10021",Name:"Active Healing Reduction",Type:""},10022:{ID:"10022",Name:"Passive Healing Reduction",Type:""},10023:{ID:"10023",Name:"HC Efficacy Reduction",Type:""},10025:{ID:"10025",Name:"KO Resistance Negation",Type:""},10026:{ID:"10026",Name:"Doom",Type:""},11e3:{ID:"11000",Name:"Negative HP-Scaled Damage",Type:"Attack"},11001:{ID:"11001",Name:"Max HP% DoT of Weaker Element Enemies",Type:""},11002:{ID:"11002",Name:"HP Limit Break, Convert to HP",Type:""},11003:{ID:"11003",Name:"Effect Negation",Type:""},70001:{ID:"70001",Name:"Mana Bubble Shield",Type:""},70002:{ID:"70002",Name:"Recast",Type:""},"2-5":{ID:"2-5",Name:"Burst Heal and DEF/REC Boost",Type:""}});function F(e,a=c){return a&&"object"==typeof a&&Object.hasOwnProperty.call(a,e)?a[e]:void 0}function D(e,a){const t=F(e,a);return!!t&&t.Type===n.Attack}var l,p,u,U,m,E,N,T,R,B,f,d,A,_,g,I,P,O,y=Object.freeze({__proto__:null,getLevelEntryForBurst:a,getEffectsForBurst:function(e,t){const i=a(e,t);return i&&Array.isArray(i.effects)?i.effects:[]},getExtraAttackDamageFramesEntry:function(e,a="0.0/0",s){const n=(Array.isArray(e)?e:[]).filter(e=>{const a=t(e);return a===i.BurstHeal||D(a,s)}).reduce((e,a,t)=>{const i=0===t,s=a["frame times"].length,n=a["hit dmg% distribution"],r=a["frame times"];for(let a=i?0:1;a<s;++a)e.push({damage:n[a],time:r[a]});return e},[]),r={"effect delay time(ms)/frame":a,"frame times":[],"hit dmg% distribution":[],"hit dmg% distribution (total)":0,hits:0};return n.sort((e,a)=>e.time-a.time).forEach(({time:e,damage:a})=>{r["frame times"].push(e),r["hit dmg% distribution"].push(a),r["hit dmg% distribution (total)"]+=a}),r.hits=r["frame times"].length,r}});function v(e,a=o){return a&&"object"==typeof a&&Object.hasOwnProperty.call(a,e)?a[e]:void 0}function h(e,a){const t=F(e,a);return!!t&&t.Name||""}function C(e,a){const t=v(e,a);return!!t&&t.Name||""}function k(e){return!!e&&"object"==typeof e&&(Object.hasOwnProperty.call(e,"proc id")||Object.hasOwnProperty.call(e,"unknown proc id"))}function W(e){return!!e&&"object"==typeof e&&(Object.hasOwnProperty.call(e,"passive id")||Object.hasOwnProperty.call(e,"unknown passive id"))}!function(e){e.hp_50pr_under="hp_50pr_under",e.hp_50pr_over="hp_50pr_over",e.hp_75pr_under="hp_75pr_under",e.hp_25pr_under="hp_25pr_under",e.hp_min="hp_min",e.hp_max="hp_max",e.atk_max="atk_max",e.random="random"}(l||(l={})),function(e){e.Moving="1",e.Teleporting="2",e.NonMoving="3"}(p||(p={})),function(e){e.Aoe="aoe",e.Single="single",e.Random="random"}(u||(u={})),function(e){e.Aoe="AOE",e.Single="ST",e.Random="RT"}(U||(U={})),function(e){e.Self="self",e.Party="party",e.Enemy="enemy"}(m||(m={})),function(e){e.AddPassive="passive",e.EnhanceBb="add to bb",e.EnhanceSbb="add to sbb",e.EnhanceUbb="add to ubb",e.EnhancePassive="add to passive"}(E||(E={})),function(e){e.None="None",e["Status Enhancing"]="Status Enhancing",e.Critical="Critical",e.Drop="Drop",e["Ailment Inducing"]="Ailment Inducing",e["Element Fusion"]="Element Fusion",e["BB Gauge"]="BB Gauge",e["HP Recovery"]="HP Recovery",e["Target Setting"]="Target Setting",e["Damage Deflecting"]="Damage Deflecting",e["Damage Reducing"]="Damage Reducing",e.Spark="Spark",e["Defense Piercing"]="Defense Piercing",e["Attack Boosting"]="Attack Boosting",e.Special="Special"}(N||(N={})),function(e){e[e.None=0]="None",e[e["Status Enhancing"]=1]="Status Enhancing",e[e.Critical=2]="Critical",e[e.Drop=3]="Drop",e[e["Ailment Inducing"]=4]="Ailment Inducing",e[e["Element Fusion"]=5]="Element Fusion",e[e["BB Gauge"]=6]="BB Gauge",e[e["HP Recovery"]=7]="HP Recovery",e[e["Target Setting"]=8]="Target Setting",e[e["Damage Deflecting"]=9]="Damage Deflecting",e[e["Damage Reducing"]=10]="Damage Reducing",e[e.Spark=11]="Spark",e[e["Defense Piercing"]=12]="Defense Piercing",e[e["Attack Boosting"]=13]="Attack Boosting",e[e.Special=14]="Special"}(T||(T={})),function(e){e["Parameter Boost"]="Parameter Boost",e.Spark="Spark",e["Critical Hits"]="Critical Hits",e["Attack Boost"]="Attack Boost",e["BB Gauge"]="BB Gauge",e["HP Recovery"]="HP Recovery",e.Drops="Drops",e["Ailment Resistance"]="Ailment Resistance",e["Ailment Infliction"]="Ailment Infliction",e["Damage Reduction"]="Damage Reduction",e.Special="Special",e.Unknown="Unknown"}(R||(R={})),function(e){e["Parameter Boost"]="1",e.Spark="2",e["Critical Hits"]="3",e["Attack Boost"]="4",e["BB Gauge"]="5",e["HP Recovery"]="6",e.Drops="7",e["Ailment Resistance"]="8",e["Ailment Infliction"]="9",e["Damage Reduction"]="10",e.Special="11"}(B||(B={})),function(e){e.Attack="attack",e.Idle="idle",e.Move="move"}(f||(f={})),function(e){e.Fire="fire",e.Water="water",e.Earth="earth",e.Thunder="thunder",e.Light="light",e.Dark="dark"}(d||(d={})),function(e){e.Male="male",e.Female="female",e.Other="other"}(A||(A={})),function(e){e.Ineligible="not eligible for achievement",e.Farmable="farmable",e.RareSummon="rare summon",e.ExtraSkillElgif="extra skill elgif"}(_||(_={})),function(e){e.Normal="normal",e.Evolution="evo",e.Enhancing="enhancing",e.Sale="sale"}(g||(g={})),function(e){e.Lord="lord",e.Anima="anima",e.Breaker="breaker",e.Guardian="guardian",e.Oracle="oracle",e.Rex="rex"}(I||(I={})),function(e){e.Consumable="consumable",e.Material="material",e.Sphere="sphere",e.EvolutionMaterial="evomat",e.SummonerConsumable="summoner_consumable",e.LeaderSkillSphere="ls_sphere"}(P||(P={})),function(e){e.Mimic="60142",e.BatMimic="60143",e.DragonMimic="60144",e.MetalMimic="60224"}(O||(O={}));const b={1e3:O.Mimic,1100:O.BatMimic,1101:O.BatMimic,1200:O.DragonMimic,1300:O.MetalMimic};var H,S,K,M,L,w,G=Object.freeze({__proto__:null,get ArenaCondition(){return l},get MoveType(){return p},get TargetArea(){return u},get TargetAreaShorthand(){return U},get TargetType(){return m},get SpPassiveType(){return E},get SphereTypeName(){return N},get SphereTypeId(){return T},get SpCategoryName(){return R},get SpCategoryId(){return B},get UnitAnimationKey(){return f},get UnitElement(){return d},get UnitGender(){return A},get UnitGettingType(){return _},get UnitKind(){return g},get UnitType(){return I},get ItemType(){return P},get MimicUnitIds(){return O},MimicMonsterGroupMapping:b});function j(e){const a=Array.isArray(e.previousSources)?e.previousSources.slice():[];return a.unshift(function(e){return`${e.source}-${e.sourceId}`}(e)),a}function $(e){const a=e&&Array.isArray(e.conditions)&&e.conditions||[],t={units:new Set,items:new Set,sphereTypes:new Set,unknowns:new Set};return a.forEach((e,a)=>{"sphere category required (raw)"in e?t.sphereTypes.add(e["sphere category required (raw)"]):"item required"in e?e["item required"].forEach(e=>{t.items.add(e)}):"unit required"in e?e["unit required"].forEach(e=>{t.units.add(`${e.id}`)}):t.unknowns.add(`type:${e.type_id||a},condition:${e.condition_id||a}`)}),Object.entries(t).filter(e=>e[1].size>0).reduce((e,a)=>(e[a[0]]=Array.from(a[1]),e),{})}function x(e,a){const t=a.source===S.LeaderSkill||e.sp_type===E.EnhancePassive||e["passive target"]===m.Party;return{targetType:t?m.Party:m.Self,targetArea:t?u.Aoe:u.Single}}function Y(e){return{targetArea:e["target area"],targetType:e["target type"]}}function X(e,a=0){return null===e||isNaN(e)?a:+e}function V(e=[],a=0){return e.reduce((e,t,i)=>(t&&"0"!==t&&(e[`param_${a+i}`]=t),e),{})}let z,q;function J(e){return z&&!e||function(e){const a={0:K.All,1:d.Fire,2:d.Water,3:d.Earth,4:d.Thunder,5:d.Light,6:d.Dark},t=(e,a,t)=>{return{targetData:(t&&t.getProcTargetData||Y)(e),sources:(t&&t.createSourcesFromContext||j)(a),effectDelay:e["effect delay time(ms)/frame"]}},i=e=>e.params.split(","),s=(e,{originalId:a,sources:t,targetData:i,effectDelay:s})=>Object.assign({id:w.UNKNOWN_PROC_BUFF_PARAMS,originalId:a,effectDelay:s,sources:t,value:e},i),n=({originalId:e,sources:a,buffs:t,duration:i,targetData:s})=>Object.assign({id:w.TURN_DURATION_MODIFICATION,originalId:e,sources:a,value:{buffs:t,duration:i}},s),r=(e,a,t)=>{let i;return e&&e.length>0&&(i=(t&&t.createUnknownParamsValue||V)(e,a)),i};e.set("1",(e,a,n)=>{const{targetData:o,sources:c,effectDelay:F}=t(e,a,n),D=+(a.damageFrames&&a.damageFrames.hits||0),l=+(a.damageFrames&&a.damageFrames["hit dmg% distribution (total)"]||0),p={"atk%":"0",flatAtk:"0","crit%":"0","bc%":"0","hc%":"0","dmg%":"0"};let u;if(e.params){let a;[p["atk%"],p.flatAtk,p["crit%"],p["bc%"],p["hc%"],p["dmg%"],...a]=i(e),u=r(a,6,n)}else p["atk%"]=e["bb atk%"],p.flatAtk=e["bb flat atk"],p["crit%"]=e["bb crit%"],p["bc%"]=e["bb bc%"],p["hc%"]=e["bb hc%"],p["dmg%"]=e["bb dmg%"];const U=Object.entries(p).filter(([,e])=>e&&+e).reduce((e,[a,t])=>(e[a]=+t,e),{}),m=[Object.assign({id:"proc:1",originalId:"1",sources:c,effectDelay:F,value:Object.assign(Object.assign({},U),{hits:D,distribution:l})},o)];return u&&m.push(s(u,{originalId:"1",sources:c,targetData:o,effectDelay:F})),m}),e.set("2",(e,a,n)=>{const{targetData:o,sources:c,effectDelay:F}=t(e,a,n),D={healLow:"0",healHigh:"0","healerRec%":0};let l;if(e.params){let a,t,s;[D.healLow,D.healHigh,a,t,...s]=i(e),D["healerRec%"]=(100+X(a))*(1+X(t)/100)/10,l=r(s,4,n)}else D.healLow=e["heal low"],D.healHigh=e["heal high"],D["healerRec%"]=e["rec added% (from healer)"];Object.keys(D).forEach(e=>{D[e]=X(D[e])});const p=[Object.assign({id:"proc:2",originalId:"2",sources:c,effectDelay:F,value:D},o)];return l&&p.push(s(l,{originalId:"2",sources:c,targetData:o,effectDelay:F})),p}),e.set("3",(e,a,o)=>{const{targetData:c,sources:F,effectDelay:D}=t(e,a,o),l={healLow:"0",healHigh:"0","targetRec%":0,turnDuration:"0"};let p;if(e.params){let a,t;[l.healLow,l.healHigh,a,l.turnDuration,...t]=i(e),l["targetRec%"]=10*(1+X(a)/100),p=r(t,4,o)}else l.healLow=e["gradual heal low"],l.healHigh=e["gradual heal high"],l["targetRec%"]=e["rec added% (from target)"],l.turnDuration=e["gradual heal turns (8)"];Object.keys(l).forEach(e=>{l[e]=X(l[e])});const u=[];return 0!==l.healLow||0!==l.healHigh?u.push(Object.assign({id:"proc:3",originalId:"3",sources:F,effectDelay:D,duration:l.turnDuration,value:{healLow:l.healLow,healHigh:l.healHigh,"targetRec%":l["targetRec%"]}},c)):0!==l.turnDuration&&u.push(n({originalId:"3",sources:F,buffs:["proc:3"],duration:l.turnDuration,targetData:c})),p&&u.push(s(p,{originalId:"3",sources:F,targetData:c,effectDelay:D})),u}),e.set("4",(e,a,n)=>{const{targetData:o,sources:c,effectDelay:F}=t(e,a,n);let D,l=0,p=0;if(e.params){const[a,t,...s]=i(e);l=X(a),p=X(t),D=r(s,2,n)}else"bb bc fill"in e&&(l=X(e["bb bc fill"])),"bb bc fill%"in e&&(p=X(e["bb bc fill%"]));const u=[];return 0!==l&&u.push(Object.assign({id:"proc:4:flat",originalId:"4",sources:c,effectDelay:F,value:l},o)),0!==p&&u.push(Object.assign({id:"proc:4:percent",originalId:"4",sources:c,effectDelay:F,value:p},o)),D&&u.push(s(D,{originalId:"4",sources:c,targetData:o,effectDelay:F})),u}),e.set("5",(e,o,c)=>{const{targetData:F,sources:D,effectDelay:l}=t(e,o,c),p={element:K.All,atk:"0",def:"0",rec:"0",crit:"0",turnDuration:"0"},u=["atk","def","rec","crit"];let U;if(e.params){let t,s;[s,p.atk,p.def,p.rec,p.crit,p.turnDuration,...t]=i(e),p.element=a[s]||K.Unknown,U=r(t,6,c)}else{const a=e["element buffed"];p.element="all"===a?K.All:a||K.Unknown;const t=Object.keys(e);u.forEach(a=>{const i=t.find(e=>e.startsWith(`${a}% buff`));i&&(p[a]=X(e[i]))}),p.turnDuration=X(e["buff turns"])}u.concat(["turnDuration"]).forEach(e=>{p[e]=X(p[e])});const m=u.some(e=>0!==p[e]),E=[];return m?u.forEach(e=>{const a=p[e];if(0!==a){const t=Object.assign({id:`proc:5:${e}`,originalId:"5",sources:D,effectDelay:l,duration:p.turnDuration,value:a},F);p.element!==K.All&&(t.conditions={targetElements:[p.element]}),E.push(t)}}):0!==p.turnDuration&&E.push(n({originalId:"5",sources:D,buffs:u.map(e=>`proc:5:${e}`),duration:p.turnDuration,targetData:F})),U&&E.push(s(U,{originalId:"5",sources:D,targetData:F,effectDelay:l})),E}),e.set("6",(e,a,o)=>{const{targetData:c,sources:F,effectDelay:D}=t(e,a,o),l={bc:"0",hc:"0",item:"0",turnDuration:"0"},p=["bc","hc","item"];let u;if(e.params){let a;[l.bc,l.hc,l.item,l.turnDuration,...a]=i(e),u=r(a,4,o)}else l.bc=e["bc drop rate% buff (10)"],l.hc=e["hc drop rate% buff (9)"],l.item=e["item drop rate% buff (11)"],l.turnDuration=e["drop buff rate turns"];p.concat(["turnDuration"]).forEach(e=>{l[e]=X(l[e])});const U=p.some(e=>0!==l[e]),m=[];return U?p.forEach(e=>{const a=l[e];0!==a&&m.push(Object.assign({id:`proc:6:${e}`,originalId:"6",sources:F,effectDelay:D,duration:l.turnDuration,value:a},c))}):0!==l.turnDuration&&m.push(n({originalId:"6",sources:F,buffs:p.map(e=>`proc:6:${e}`),duration:l.turnDuration,targetData:c})),u&&m.push(s(u,{originalId:"6",sources:F,targetData:c,effectDelay:D})),m}),e.set("7",(e,a,n)=>{const{targetData:o,sources:c,effectDelay:F}=t(e,a,n);let D,l=0;if(e.params){let a,t;[t,...a]=i(e),l=X(t),D=r(a,1,n)}else l=X(e["angel idol recover hp%"]);const p=[Object.assign({id:"proc:7",originalId:"7",sources:c,effectDelay:F,value:l},o)];return D&&p.push(s(D,{originalId:"7",sources:c,targetData:o,effectDelay:F})),p}),e.set("8",(e,a,n)=>{const{targetData:o,sources:c,effectDelay:F}=t(e,a,n);let D,l=0,p=0;if(e.params){const[a,t,...s]=i(e);l=X(a),p=X(t),D=r(s,2,n)}else"max hp increase"in e&&(l=X(e["max hp increase"])),"max hp% increase"in e&&(p=X(e["max hp% increase"]));const u=[];return 0!==l&&u.push(Object.assign({id:"proc:8:flat",originalId:"8",sources:c,effectDelay:F,value:l},o)),0!==p&&u.push(Object.assign({id:"proc:8:percent",originalId:"8",sources:c,effectDelay:F,value:p},o)),D&&u.push(s(D,{originalId:"8",sources:c,targetData:o,effectDelay:F})),u}),e.set("9",(e,o,c)=>{const{targetData:F,sources:D,effectDelay:l}=t(e,o,c),p={0:"atk",1:"def",2:"rec"},u=["atk","def","rec"],U={element:K.All,statReductionEntries:[],turnDuration:0};let m;if(e.params){let[t,s,n,o,F,D,l,E,...N]=i(e);U.element=a[t]||K.Unknown,U.turnDuration=X(E),[[s,n,o],[F,D,l]].forEach(([e,a,t])=>{const i=X(e)-1,s=X(a),n=X(t);3===i?U.statReductionEntries.push(...u.map(e=>({stat:e,value:s,chance:n}))):U.statReductionEntries.push({stat:p[i]||"unknown",value:s,chance:n})}),m=r(N,8,c)}else{const a=e["element buffed"];U.element="all"===a?K.All:a||K.Unknown,["buff #1","buff #2"].forEach(a=>{const t=e[a];if(t){const e=X(t["proc chance%"]),a=Object.keys(t);u.forEach(i=>{const s=a.find(e=>e.startsWith(`${i}% buff`));s&&U.statReductionEntries.push({stat:i,value:X(t[s]),chance:e})})}}),U.turnDuration=X(e["buff turns"])}const E=[];let N=!1;return U.statReductionEntries.forEach(({stat:e,value:a,chance:t})=>{if(0!==a||0!==t){N=!0;const i=Object.assign({id:`proc:9:${e}`,originalId:"9",sources:D,effectDelay:l,duration:U.turnDuration,value:{value:a,chance:t}},F);U.element!==K.All&&(i.conditions={targetElements:[U.element]}),E.push(i)}}),N||0===U.turnDuration||E.push(n({originalId:"9",sources:D,buffs:u.map(e=>`proc:9:${e}`),duration:U.turnDuration,targetData:F})),m&&E.push(s(m,{originalId:"9",sources:D,targetData:F,effectDelay:l})),E})}(z=new Map),z}function Q(e){return q&&!e||function(e){const a={1:d.Fire,2:d.Water,3:d.Earth,4:d.Thunder,5:d.Light,6:d.Dark,X:K.OmniParadigm},t={1:I.Lord,2:I.Anima,3:I.Breaker,4:I.Guardian,5:I.Oracle,6:I.Rex},i=["atk","def","rec","crit","hp"],s=["poison","weak","sick","injury","curse","paralysis"],n=(e,a,t)=>{return{conditionInfo:(t&&t.processExtraSkillConditions||$)(e),targetData:(t&&t.getPassiveTargetData||x)(e,a),sources:(t&&t.createSourcesFromContext||j)(a)}},r=(e,{originalId:a,sources:t,targetData:i,conditionInfo:s})=>Object.assign({id:w.UNKNOWN_PASSIVE_BUFF_PARAMS,originalId:a,sources:t,value:e,conditions:Object.assign({},s)},i),o=(e,a,t)=>{let i;return e&&e.length>0&&(i=(t&&t.createUnknownParamsValue||V)(e,a)),i};e.set("1",(e,a,t)=>{const{conditionInfo:s,targetData:c,sources:F}=n(e,a,t),D=e,l=[],p={atk:"0",def:"0",rec:"0",crit:"0",hp:"0"};let u;if(D.params){let e;[p.atk,p.def,p.rec,p.crit,p.hp,...e]=D.params.split(","),u=o(e,5,t)}else p.hp=D["hp% buff"],p.atk=D["atk% buff"],p.def=D["def% buff"],p.rec=D["rec% buff"],p.crit=D["crit% buff"];return i.forEach(e=>{const a=X(p[e]);0!==a&&l.push(Object.assign({id:`passive:1:${e}`,originalId:"1",sources:F,value:a,conditions:Object.assign({},s)},c))}),u&&l.push(r(u,{originalId:"1",sources:F,targetData:c,conditionInfo:s})),l}),e.set("2",(e,t,s)=>{const{conditionInfo:c,targetData:F,sources:D}=n(e,t,s),l=e,p=[],u={elements:[],atk:"0",def:"0",rec:"0",crit:"0",hp:"0"};let U;if(l.params){let e,t,i;[t,i,u.atk,u.def,u.rec,u.crit,u.hp,...e]=l.params.split(","),[t,i].forEach(e=>{e&&"0"!==e&&u.elements.push(a[e]||K.Unknown)}),U=o(e,7,s)}else u.elements=l["elements buffed"],u.hp=l["hp% buff"],u.atk=l["atk% buff"],u.def=l["def% buff"],u.rec=l["rec% buff"],u.crit=l["crit% buff"];const m=e=>Object.assign({id:`passive:2:${e}`,originalId:"2",sources:D,value:X(u[e])},F);return u.elements.length>0?u.elements.forEach(e=>{i.forEach(a=>{0!==X(u[a])&&p.push(Object.assign(Object.assign({},m(a)),{conditions:Object.assign(Object.assign({},c),{targetElements:[e]})}))})}):i.forEach(e=>{0!==X(u[e])&&p.push(Object.assign(Object.assign({},m(e)),{conditions:Object.assign(Object.assign({},c),{targetElements:[K.Unknown]})}))}),U&&p.push(r(U,{originalId:"2",sources:D,targetData:F,conditionInfo:c})),p}),e.set("3",(e,a,s)=>{const{conditionInfo:c,targetData:F,sources:D}=n(e,a,s),l=e,p=[],u={unitType:"",atk:"0",def:"0",rec:"0",crit:"0",hp:"0"};let U;if(l.params){let e,a;[a,u.atk,u.def,u.rec,u.crit,u.hp,...e]=l.params.split(","),a&&"0"!==a&&(u.unitType=t[a]||"unknown"),U=o(e,6,s)}else u.unitType=l["unit type buffed"],u.hp=l["hp% buff"],u.atk=l["atk% buff"],u.def=l["def% buff"],u.rec=l["rec% buff"],u.crit=l["crit% buff"];const m=u.unitType||"unknown";return i.forEach(e=>{const a=X(u[e]);0!==a&&p.push(Object.assign({id:`passive:3:${e}`,originalId:"3",sources:D,value:+a,conditions:Object.assign(Object.assign({},c),{targetUnitType:m})},F))}),U&&p.push(r(U,{originalId:"3",sources:D,targetData:F,conditionInfo:c})),p}),e.set("4",(e,a,t)=>{const{conditionInfo:i,targetData:c,sources:F}=n(e,a,t),D=e,l=[],p={poison:"0",weak:"0",sick:"0",injury:"0",curse:"0",paralysis:"0"};let u;if(D.params){let e;[p.poison,p.weak,p.sick,p.injury,p.curse,p.paralysis,...e]=D.params.split(","),u=o(e,6,t)}else s.forEach(e=>{const a="weak"!==e?e:"weaken";p[e]=D[`${a} resist%`]});return s.forEach(e=>{const a=X(p[e]);0!==a&&l.push(Object.assign({id:`passive:4:${e}`,originalId:"4",sources:F,value:a,conditions:Object.assign({},i)},c))}),u&&l.push(r(u,{originalId:"4",sources:F,targetData:c,conditionInfo:i})),l}),e.set("5",(e,t,i)=>{const{conditionInfo:s,targetData:c,sources:F}=n(e,t,i),D=e,l=[];let p,u,U="0";if(D.params){let e,t;[t,U,...e]=D.params.split(","),p=a[t]||K.Unknown,u=o(e,2,i)}else(p=Object.values(a).find(a=>`${a} resist%`in e)||K.Unknown)!==K.Unknown&&(U=D[`${p} resist%`]);const m=X(U);return 0!==m&&l.push(Object.assign({id:`passive:5:${p}`,originalId:"5",sources:F,value:m,conditions:Object.assign({},s)},c)),u&&l.push(r(u,{originalId:"5",sources:F,targetData:c,conditionInfo:s})),l}),e.set("8",(e,a,t)=>{const{conditionInfo:i,targetData:s,sources:c}=n(e,a,t),F=e,D=[];let l,p="0";if(F.params){let e;[p,...e]=F.params.split(","),l=o(e,1,t)}else p=F["dmg% mitigation"];const u=X(p);return 0!==u&&D.push(Object.assign({id:"passive:8",originalId:"8",sources:c,value:u,conditions:Object.assign({},i)},s)),l&&D.push(r(l,{originalId:"8",sources:c,targetData:s,conditionInfo:i})),D})}(q=new Map),q}!function(e){e.Active="active",e.Passive="passive",e.ConditionalTimed="conditionalTimed",e.Singleton="singleton",e.Burst="burst",e.Attack="attack",e.Unknown="unknown"}(H||(H={})),function(e){e.BraveBurst="bb",e.SuperBraveBurst="sbb",e.UltimateBraveBurst="ubb",e.DualBraveBurst="dbb",e.BondedBraveBurst="bbb",e.BondedSuperBraveBurst="dsbb",e.SpEnhancement="sp",e.Item="item",e.LeaderSkill="ls",e.ExtraSkill="es",e.OmniParadigm="omniParadigm",e.UnitTypeBonus="unitTypeBonus",e.Quest="quest"}(S||(S={})),function(e){e.Unknown="unknown",e.OmniParadigm="omniParadigm",e.All="all"}(K||(K={})),function(e){e.hp="hp",e.atk="atk",e.def="def",e.rec="rec",e.crit="crit",e.bbGauge="bbGauge",e.bcDropRate="bcDropRate",e.hcDropRate="hcDropRate",e.itemDropRate="itemDropRate",e.poisonResist="poisonResist",e.weakResist="weakResist",e.sickResist="sickResist",e.injuryResist="injuryResist",e.curseResist="curseResist",e.paralysisResist="paralysisResist",e.mitigation="mitigation",e.fireMitigation="fireMitigation",e.waterMitigation="waterMitigation",e.earthMitigation="earthMitigation",e.thunderMitigation="thunderMitigation",e.lightMitigation="lightMitigation",e.darkMitigation="darkMitigation",e.turnDurationModification="turnDurationModification",e.koResistance="koResistance"}(M||(M={})),function(e){e.UNKNOWN="UNKNOWN",e.TURN_DURATION_UP="TURN_DURATION_UP",e.TURN_DURATION_DOWN="TURN_DURATION_DOWN",e.BUFF_HPUP="BUFF_HPUP",e.BUFF_HPDOWN="BUFF_HPDOWN",e.BUFF_ATKUP="BUFF_ATKUP",e.BUFF_ATKDOWN="BUFF_ATKDOWN",e.BUFF_DEFUP="BUFF_DEFUP",e.BUFF_DEFDOWN="BUFF_DEFDOWN",e.BUFF_RECUP="BUFF_RECUP",e.BUFF_RECDOWN="BUFF_RECDOWN",e.BUFF_CRTRATEUP="BUFF_CRTRATEUP",e.BUFF_CRTRATEDOWN="BUFF_CRTRATEDOWN",e.BUFF_HPREC="BUFF_HPREC",e.BUFF_BBREC="BUFF_BBREC",e.BUFF_FIREHPUP="BUFF_FIREHPUP",e.BUFF_FIREHPDOWN="BUFF_FIREHPDOWN",e.BUFF_FIREATKUP="BUFF_FIREATKUP",e.BUFF_FIREATKDOWN="BUFF_FIREATKDOWN",e.BUFF_FIREDEFUP="BUFF_FIREDEFUP",e.BUFF_FIREDEFDOWN="BUFF_FIREDEFDOWN",e.BUFF_FIRERECUP="BUFF_FIRERECUP",e.BUFF_FIRERECDOWN="BUFF_FIRERECDOWN",e.BUFF_FIRECRTRATEUP="BUFF_FIRECRTRATEUP",e.BUFF_FIRECRTRATEDOWN="BUFF_FIRECRTRATEDOWN",e.BUFF_WATERHPUP="BUFF_WATERHPUP",e.BUFF_WATERHPDOWN="BUFF_WATERHPDOWN",e.BUFF_WATERATKUP="BUFF_WATERATKUP",e.BUFF_WATERATKDOWN="BUFF_WATERATKDOWN",e.BUFF_WATERDEFUP="BUFF_WATERDEFUP",e.BUFF_WATERDEFDOWN="BUFF_WATERDEFDOWN",e.BUFF_WATERRECUP="BUFF_WATERRECUP",e.BUFF_WATERRECDOWN="BUFF_WATERRECDOWN",e.BUFF_WATERCRTRATEUP="BUFF_WATERCRTRATEUP",e.BUFF_WATERCRTRATEDOWN="BUFF_WATERCRTRATEDOWN",e.BUFF_EARTHHPUP="BUFF_EARTHHPUP",e.BUFF_EARTHHPDOWN="BUFF_EARTHHPDOWN",e.BUFF_EARTHATKUP="BUFF_EARTHATKUP",e.BUFF_EARTHATKDOWN="BUFF_EARTHATKDOWN",e.BUFF_EARTHDEFUP="BUFF_EARTHDEFUP",e.BUFF_EARTHDEFDOWN="BUFF_EARTHDEFDOWN",e.BUFF_EARTHRECUP="BUFF_EARTHRECUP",e.BUFF_EARTHRECDOWN="BUFF_EARTHRECDOWN",e.BUFF_EARTHCRTRATEUP="BUFF_EARTHCRTRATEUP",e.BUFF_EARTHCRTRATEDOWN="BUFF_EARTHCRTRATEDOWN",e.BUFF_THUNDERHPUP="BUFF_THUNDERHPUP",e.BUFF_THUNDERHPDOWN="BUFF_THUNDERHPDOWN",e.BUFF_THUNDERATKUP="BUFF_THUNDERATKUP",e.BUFF_THUNDERATKDOWN="BUFF_THUNDERATKDOWN",e.BUFF_THUNDERDEFUP="BUFF_THUNDERDEFUP",e.BUFF_THUNDERDEFDOWN="BUFF_THUNDERDEFDOWN",e.BUFF_THUNDERRECUP="BUFF_THUNDERRECUP",e.BUFF_THUNDERRECDOWN="BUFF_THUNDERRECDOWN",e.BUFF_THUNDERCRTRATEUP="BUFF_THUNDERCRTRATEUP",e.BUFF_THUNDERCRTRATEDOWN="BUFF_THUNDERCRTRATEDOWN",e.BUFF_LIGHTHPUP="BUFF_LIGHTHPUP",e.BUFF_LIGHTHPDOWN="BUFF_LIGHTHPDOWN",e.BUFF_LIGHTATKUP="BUFF_LIGHTATKUP",e.BUFF_LIGHTATKDOWN="BUFF_LIGHTATKDOWN",e.BUFF_LIGHTDEFUP="BUFF_LIGHTDEFUP",e.BUFF_LIGHTDEFDOWN="BUFF_LIGHTDEFDOWN",e.BUFF_LIGHTRECUP="BUFF_LIGHTRECUP",e.BUFF_LIGHTRECDOWN="BUFF_LIGHTRECDOWN",e.BUFF_LIGHTCRTRATEUP="BUFF_LIGHTCRTRATEUP",e.BUFF_LIGHTCRTRATEDOWN="BUFF_LIGHTCRTRATEDOWN",e.BUFF_DARKHPUP="BUFF_DARKHPUP",e.BUFF_DARKHPDOWN="BUFF_DARKHPDOWN",e.BUFF_DARKATKUP="BUFF_DARKATKUP",e.BUFF_DARKATKDOWN="BUFF_DARKATKDOWN",e.BUFF_DARKDEFUP="BUFF_DARKDEFUP",e.BUFF_DARKDEFDOWN="BUFF_DARKDEFDOWN",e.BUFF_DARKRECUP="BUFF_DARKRECUP",e.BUFF_DARKRECDOWN="BUFF_DARKRECDOWN",e.BUFF_DARKCRTRATEUP="BUFF_DARKCRTRATEUP",e.BUFF_DARKCRTRATEDOWN="BUFF_DARKCRTRATEDOWN",e.BUFF_ELEMENTHPUP="BUFF_ELEMENTHPUP",e.BUFF_ELEMENTHPDOWN="BUFF_ELEMENTHPDOWN",e.BUFF_ELEMENTATKUP="BUFF_ELEMENTATKUP",e.BUFF_ELEMENTATKDOWN="BUFF_ELEMENTATKDOWN",e.BUFF_ELEMENTDEFUP="BUFF_ELEMENTDEFUP",e.BUFF_ELEMENTDEFDOWN="BUFF_ELEMENTDEFDOWN",e.BUFF_ELEMENTRECUP="BUFF_ELEMENTRECUP",e.BUFF_ELEMENTRECDOWN="BUFF_ELEMENTRECDOWN",e.BUFF_ELEMENTCRTRATEUP="BUFF_ELEMENTCRTRATEUP",e.BUFF_ELEMENTCRTRATEDOWN="BUFF_ELEMENTCRTRATEDOWN",e.BUFF_LORDHPUP="BUFF_LORDHPUP",e.BUFF_LORDHPDOWN="BUFF_LORDHPDOWN",e.BUFF_LORDATKUP="BUFF_LORDATKUP",e.BUFF_LORDATKDOWN="BUFF_LORDATKDOWN",e.BUFF_LORDDEFUP="BUFF_LORDDEFUP",e.BUFF_LORDDEFDOWN="BUFF_LORDDEFDOWN",e.BUFF_LORDRECUP="BUFF_LORDRECUP",e.BUFF_LORDRECDOWN="BUFF_LORDRECDOWN",e.BUFF_LORDCRTRATEUP="BUFF_LORDCRTRATEUP",e.BUFF_LORDCRTRATEDOWN="BUFF_LORDCRTRATEDOWN",e.BUFF_ANIMAHPUP="BUFF_ANIMAHPUP",e.BUFF_ANIMAHPDOWN="BUFF_ANIMAHPDOWN",e.BUFF_ANIMAATKUP="BUFF_ANIMAATKUP",e.BUFF_ANIMAATKDOWN="BUFF_ANIMAATKDOWN",e.BUFF_ANIMADEFUP="BUFF_ANIMADEFUP",e.BUFF_ANIMADEFDOWN="BUFF_ANIMADEFDOWN",e.BUFF_ANIMARECUP="BUFF_ANIMARECUP",e.BUFF_ANIMARECDOWN="BUFF_ANIMARECDOWN",e.BUFF_ANIMACRTRATEUP="BUFF_ANIMACRTRATEUP",e.BUFF_ANIMACRTRATEDOWN="BUFF_ANIMACRTRATEDOWN",e.BUFF_BREAKERHPUP="BUFF_BREAKERHPUP",e.BUFF_BREAKERHPDOWN="BUFF_BREAKERHPDOWN",e.BUFF_BREAKERATKUP="BUFF_BREAKERATKUP",e.BUFF_BREAKERATKDOWN="BUFF_BREAKERATKDOWN",e.BUFF_BREAKERDEFUP="BUFF_BREAKERDEFUP",e.BUFF_BREAKERDEFDOWN="BUFF_BREAKERDEFDOWN",e.BUFF_BREAKERRECUP="BUFF_BREAKERRECUP",e.BUFF_BREAKERRECDOWN="BUFF_BREAKERRECDOWN",e.BUFF_BREAKERCRTRATEUP="BUFF_BREAKERCRTRATEUP",e.BUFF_BREAKERCRTRATEDOWN="BUFF_BREAKERCRTRATEDOWN",e.BUFF_GUARDIANHPUP="BUFF_GUARDIANHPUP",e.BUFF_GUARDIANHPDOWN="BUFF_GUARDIANHPDOWN",e.BUFF_GUARDIANATKUP="BUFF_GUARDIANATKUP",e.BUFF_GUARDIANATKDOWN="BUFF_GUARDIANATKDOWN",e.BUFF_GUARDIANDEFUP="BUFF_GUARDIANDEFUP",e.BUFF_GUARDIANDEFDOWN="BUFF_GUARDIANDEFDOWN",e.BUFF_GUARDIANRECUP="BUFF_GUARDIANRECUP",e.BUFF_GUARDIANRECDOWN="BUFF_GUARDIANRECDOWN",e.BUFF_GUARDIANCRTRATEUP="BUFF_GUARDIANCRTRATEUP",e.BUFF_GUARDIANCRTRATEDOWN="BUFF_GUARDIANCRTRATEDOWN",e.BUFF_ORACLEHPUP="BUFF_ORACLEHPUP",e.BUFF_ORACLEHPDOWN="BUFF_ORACLEHPDOWN",e.BUFF_ORACLEATKUP="BUFF_ORACLEATKUP",e.BUFF_ORACLEATKDOWN="BUFF_ORACLEATKDOWN",e.BUFF_ORACLEDEFUP="BUFF_ORACLEDEFUP",e.BUFF_ORACLEDEFDOWN="BUFF_ORACLEDEFDOWN",e.BUFF_ORACLERECUP="BUFF_ORACLERECUP",e.BUFF_ORACLERECDOWN="BUFF_ORACLERECDOWN",e.BUFF_ORACLECRTRATEUP="BUFF_ORACLECRTRATEUP",e.BUFF_ORACLECRTRATEDOWN="BUFF_ORACLECRTRATEDOWN",e.BUFF_REXHPUP="BUFF_REXHPUP",e.BUFF_REXHPDOWN="BUFF_REXHPDOWN",e.BUFF_REXATKUP="BUFF_REXATKUP",e.BUFF_REXATKDOWN="BUFF_REXATKDOWN",e.BUFF_REXDEFUP="BUFF_REXDEFUP",e.BUFF_REXDEFDOWN="BUFF_REXDEFDOWN",e.BUFF_REXRECUP="BUFF_REXRECUP",e.BUFF_REXRECDOWN="BUFF_REXRECDOWN",e.BUFF_REXCRTRATEUP="BUFF_REXCRTRATEUP",e.BUFF_REXCRTRATEDOWN="BUFF_REXCRTRATEDOWN",e.BUFF_UNITTYPEHPUP="BUFF_UNITTYPEHPUP",e.BUFF_UNITTYPEHPDOWN="BUFF_UNITTYPEHPDOWN",e.BUFF_UNITTYPEATKUP="BUFF_UNITTYPEATKUP",e.BUFF_UNITTYPEATKDOWN="BUFF_UNITTYPEATKDOWN",e.BUFF_UNITTYPEDEFUP="BUFF_UNITTYPEDEFUP",e.BUFF_UNITTYPEDEFDOWN="BUFF_UNITTYPEDEFDOWN",e.BUFF_UNITTYPERECUP="BUFF_UNITTYPERECUP",e.BUFF_UNITTYPERECDOWN="BUFF_UNITTYPERECDOWN",e.BUFF_UNITTYPECRTRATEUP="BUFF_UNITTYPECRTRATEUP",e.BUFF_UNITTYPECRTRATEDOWN="BUFF_UNITTYPECRTRATEDOWN",e.BUFF_POISONBLK="BUFF_POISONBLK",e.BUFF_WEAKBLK="BUFF_WEAKBLK",e.BUFF_SICKBLK="BUFF_SICKBLK",e.BUFF_INJURYBLK="BUFF_INJURYBLK",e.BUFF_CURSEBLK="BUFF_CURSEBLK",e.BUFF_PARALYSISBLK="BUFF_PARALYSISBLK",e.BUFF_DAMAGECUT="BUFF_DAMAGECUT",e.BUFF_FIREDMGDOWN="BUFF_FIREDMGDOWN",e.BUFF_WATERDMGDOWN="BUFF_WATERDMGDOWN",e.BUFF_EARTHDMGDOWN="BUFF_EARTHDMGDOWN",e.BUFF_THUNDERDMGDOWN="BUFF_THUNDERDMGDOWN",e.BUFF_LIGHTDMGDOWN="BUFF_LIGHTDMGDOWN",e.BUFF_DARKDMGDOWN="BUFF_DARKDMGDOWN",e.BUFF_ELEMENTDMGDOWN="BUFF_ELEMENTDMGDOWN",e.BUFF_HCDROP="BUFF_HCDROP",e.BUFF_HCDOWN="BUFF_HCDOWN",e.BUFF_BCDROP="BUFF_BCDROP",e.BUFF_BCDOWN="BUFF_BCDOWN",e.BUFF_ITEMDROP="BUFF_ITEMDROP",e.BUFF_ITEMDOWN="BUFF_ITEMDOWN",e.BUFF_KOBLK="BUFF_KOBLK",e.ATK_ST="ATK_ST",e.ATK_AOE="ATK_AOE"}(L||(L={})),function(e){e.UNKNOWN_PASSIVE_EFFECT_ID="UNKNOWN_PASSIVE_EFFECT_ID",e.UNKNOWN_PASSIVE_BUFF_PARAMS="UNKNOWN_PASSIVE_BUFF_PARAMS",e.TURN_DURATION_MODIFICATION="TURN_DURATION_MODIFICATION",e["passive:1:hp"]="passive:1:hp",e["passive:1:atk"]="passive:1:atk",e["passive:1:def"]="passive:1:def",e["passive:1:rec"]="passive:1:rec",e["passive:1:crit"]="passive:1:crit",e["passive:2:hp"]="passive:2:hp",e["passive:2:atk"]="passive:2:atk",e["passive:2:def"]="passive:2:def",e["passive:2:rec"]="passive:2:rec",e["passive:2:crit"]="passive:2:crit",e["passive:3:hp"]="passive:3:hp",e["passive:3:atk"]="passive:3:atk",e["passive:3:def"]="passive:3:def",e["passive:3:rec"]="passive:3:rec",e["passive:3:crit"]="passive:3:crit",e["passive:4:poison"]="passive:4:poison",e["passive:4:weak"]="passive:4:weak",e["passive:4:sick"]="passive:4:sick",e["passive:4:injury"]="passive:4:injury",e["passive:4:curse"]="passive:4:curse",e["passive:4:paralysis"]="passive:4:paralysis",e["passive:5:fire"]="passive:5:fire",e["passive:5:water"]="passive:5:water",e["passive:5:earth"]="passive:5:earth",e["passive:5:thunder"]="passive:5:thunder",e["passive:5:light"]="passive:5:light",e["passive:5:dark"]="passive:5:dark",e["passive:5:unknown"]="passive:5:unknown",e["passive:8"]="passive:8",e.UNKNOWN_PROC_EFFECT_ID="UNKNOWN_PROC_EFFECT_ID",e.UNKNOWN_PROC_BUFF_PARAMS="UNKNOWN_PROC_BUFF_PARAMS",e["proc:1"]="proc:1",e["proc:2"]="proc:2",e["proc:3"]="proc:3",e["proc:4:flat"]="proc:4:flat",e["proc:4:percent"]="proc:4:percent",e["proc:5:atk"]="proc:5:atk",e["proc:5:def"]="proc:5:def",e["proc:5:rec"]="proc:5:rec",e["proc:5:crit"]="proc:5:crit",e["proc:6:bc"]="proc:6:bc",e["proc:6:hc"]="proc:6:hc",e["proc:6:item"]="proc:6:item",e["proc:7"]="proc:7",e["proc:8:flat"]="proc:8:flat",e["proc:8:percent"]="proc:8:percent",e["proc:9:atk"]="proc:9:atk",e["proc:9:def"]="proc:9:def",e["proc:9:rec"]="proc:9:rec"}(w||(w={}));const Z=Object.freeze(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({UNKNOWN_PASSIVE_EFFECT_ID:{id:w.UNKNOWN_PASSIVE_EFFECT_ID,name:"Unknown Passive Effect",stackType:H.Unknown,icons:()=>[L.UNKNOWN]},UNKNOWN_PASSIVE_BUFF_PARAMS:{id:w.UNKNOWN_PASSIVE_BUFF_PARAMS,name:"Unknown Passive Buff Parameters",stackType:H.Unknown,icons:()=>[L.UNKNOWN]},TURN_DURATION_MODIFICATION:{id:w.TURN_DURATION_MODIFICATION,name:"Passive Turn Duration Modification",stat:M.turnDurationModification,stackType:H.Passive,icons:e=>[e&&e.value&&e.value.duration&&e.value.duration<0?L.TURN_DURATION_DOWN:L.TURN_DURATION_UP]},"passive:1:hp":{id:w["passive:1:hp"],name:"Passive HP Boost",stat:M.hp,stackType:H.Passive,icons:e=>[e&&e.value&&e.value<0?L.BUFF_HPDOWN:L.BUFF_HPUP]},"passive:1:atk":{id:w["passive:1:atk"],name:"Passive Attack Boost",stat:M.atk,stackType:H.Passive,icons:e=>[e&&e.value&&e.value<0?L.BUFF_ATKDOWN:L.BUFF_ATKUP]},"passive:1:def":{id:w["passive:1:def"],name:"Passive Defense Boost",stat:M.def,stackType:H.Passive,icons:e=>[e&&e.value&&e.value<0?L.BUFF_DEFDOWN:L.BUFF_DEFUP]},"passive:1:rec":{id:w["passive:1:rec"],name:"Passive Recovery Boost",stat:M.rec,stackType:H.Passive,icons:e=>[e&&e.value&&e.value<0?L.BUFF_RECDOWN:L.BUFF_RECUP]},"passive:1:crit":{id:w["passive:1:crit"],name:"Passive Critical Hit Rate Boost",stat:M.crit,stackType:H.Passive,icons:e=>[e&&e.value&&e.value<0?L.BUFF_CRTRATEDOWN:L.BUFF_CRTRATEUP]}},(()=>{const e=e=>a=>{let t="",i="UP";a&&(a.value&&a.value<0&&(i="DOWN"),a.conditions&&a.conditions.targetElements&&(t=a.conditions.targetElements[0])),"string"!=typeof t&&(t="");let s=`BUFF_${t.toUpperCase()}${e}${i}`;return t&&s in L||(s=`BUFF_ELEMENT${e}${i}`),[L[s]]};return{"passive:2:hp":{id:w["passive:2:hp"],name:"Passive Elemental HP Boost",stat:M.hp,stackType:H.Passive,icons:e("HP")},"passive:2:atk":{id:w["passive:2:atk"],name:"Passive Elemental Attack Boost",stat:M.atk,stackType:H.Passive,icons:e("ATK")},"passive:2:def":{id:w["passive:2:def"],name:"Passive Elemental Defense Boost",stat:M.def,stackType:H.Passive,icons:e("DEF")},"passive:2:rec":{id:w["passive:2:rec"],name:"Passive Elemental Recovery Boost",stat:M.rec,stackType:H.Passive,icons:e("REC")},"passive:2:crit":{id:w["passive:2:crit"],name:"Passive Elemental Critical Hit Rate Boost",stat:M.crit,stackType:H.Passive,icons:e("CRTRATE")}}})()),(()=>{const e=e=>a=>{let t="",i="UP";a&&(a.value&&a.value<0&&(i="DOWN"),a.conditions&&(t=a.conditions.targetUnitType||"")),"string"==typeof t&&t||(t="unknown");let s=`BUFF_${t.toUpperCase()}${e}${i}`;return t&&s in L||(s=`BUFF_UNITTYPE${e}${i}`),[L[s]]};return{"passive:3:hp":{id:w["passive:3:hp"],name:"Passive Type-Based HP Boost",stat:M.hp,stackType:H.Passive,icons:e("HP")},"passive:3:atk":{id:w["passive:3:atk"],name:"Passive Type-Based Attack Boost",stat:M.atk,stackType:H.Passive,icons:e("ATK")},"passive:3:def":{id:w["passive:3:def"],name:"Passive Type-Based Defense Boost",stat:M.def,stackType:H.Passive,icons:e("DEF")},"passive:3:rec":{id:w["passive:3:rec"],name:"Passive Type-Based Recovery Boost",stat:M.rec,stackType:H.Passive,icons:e("REC")},"passive:3:crit":{id:w["passive:3:crit"],name:"Passive Type-Based Critical Hit Rate Boost",stat:M.crit,stackType:H.Passive,icons:e("CRTRATE")}}})()),{"passive:4:poison":{id:w["passive:4:poison"],name:"Passive Poison Resist",stat:M.poisonResist,stackType:H.Passive,icons:()=>[L.BUFF_POISONBLK]},"passive:4:weak":{id:w["passive:4:weak"],name:"Passive Weak Resist",stat:M.weakResist,stackType:H.Passive,icons:()=>[L.BUFF_WEAKBLK]},"passive:4:sick":{id:w["passive:4:sick"],name:"Passive Sick Resist",stat:M.sickResist,stackType:H.Passive,icons:()=>[L.BUFF_SICKBLK]},"passive:4:injury":{id:w["passive:4:injury"],name:"Passive Injury Resist",stat:M.injuryResist,stackType:H.Passive,icons:()=>[L.BUFF_INJURYBLK]},"passive:4:curse":{id:w["passive:4:curse"],name:"Passive Curse Resist",stat:M.curseResist,stackType:H.Passive,icons:()=>[L.BUFF_CURSEBLK]},"passive:4:paralysis":{id:w["passive:4:paralysis"],name:"Passive Paralysis Resist",stat:M.poisonResist,stackType:H.Passive,icons:()=>[L.BUFF_PARALYSISBLK]},"passive:5:fire":{id:w["passive:5:fire"],name:"Passive Fire Damage Reduction",stat:M.fireMitigation,stackType:H.Passive,icons:()=>[L.BUFF_FIREDMGDOWN]},"passive:5:water":{id:w["passive:5:water"],name:"Passive Water Damage Reduction",stat:M.waterMitigation,stackType:H.Passive,icons:()=>[L.BUFF_WATERDMGDOWN]},"passive:5:earth":{id:w["passive:5:earth"],name:"Passive Earth Damage Reduction",stat:M.earthMitigation,stackType:H.Passive,icons:()=>[L.BUFF_EARTHDMGDOWN]},"passive:5:thunder":{id:w["passive:5:thunder"],name:"Passive Thunder Damage Reduction",stat:M.thunderMitigation,stackType:H.Passive,icons:()=>[L.BUFF_THUNDERDMGDOWN]},"passive:5:light":{id:w["passive:5:light"],name:"Passive Light Damage Reduction",stat:M.lightMitigation,stackType:H.Passive,icons:()=>[L.BUFF_LIGHTDMGDOWN]},"passive:5:dark":{id:w["passive:5:dark"],name:"Passive Dark Damage Reduction",stat:M.darkMitigation,stackType:H.Passive,icons:()=>[L.BUFF_DARKDMGDOWN]},"passive:5:unknown":{id:w["passive:5:unknown"],name:"Passive Elemental Damage Reduction (Unspecified Element)",stat:M.mitigation,stackType:H.Passive,icons:()=>[L.BUFF_ELEMENTDMGDOWN]},"passive:8":{id:w["passive:8"],name:"Passive Damage Reduction",stat:M.mitigation,stackType:H.Passive,icons:()=>[L.BUFF_DAMAGECUT]},UNKNOWN_PROC_EFFECT_ID:{id:w.UNKNOWN_PROC_EFFECT_ID,name:"Unknown Proc Effect",stackType:H.Unknown,icons:()=>[L.UNKNOWN]},UNKNOWN_PROC_BUFF_PARAMS:{id:w.UNKNOWN_PROC_BUFF_PARAMS,name:"Unknown Proc Buff Parameters",stackType:H.Unknown,icons:()=>[L.UNKNOWN]},"proc:1":{id:w["proc:1"],name:"Regular Damage",stackType:H.Attack,icons:e=>[e&&e.targetArea===u.Single?L.ATK_ST:L.ATK_AOE]},"proc:2":{id:w["proc:2"],name:"Burst Heal",stat:M.hp,stackType:H.Burst,icons:()=>[L.BUFF_HPREC]},"proc:3":{id:w["proc:3"],name:"Gradual Heal",stat:M.hp,stackType:H.Active,icons:()=>[L.BUFF_HPREC]},"proc:4:flat":{id:w["proc:4:flat"],name:"Burst BB Gauge Fill (Flat Amount)",stat:M.bbGauge,stackType:H.Burst,icons:()=>[L.BUFF_BBREC]},"proc:4:percent":{id:w["proc:4:percent"],name:"Burst BB Gauge Fill (Percentage)",stat:M.bbGauge,stackType:H.Burst,icons:()=>[L.BUFF_BBREC]}}),(()=>{const e=e=>a=>{let t="",i=!1,s="UP";a&&(a.value&&a.value<0&&(s="DOWN"),a.conditions&&a.conditions.targetElements&&(t=a.conditions.targetElements[0],i=!0)),"string"!=typeof t&&(t="");let n=`BUFF_${t.toUpperCase()}${e}${s}`;return t&&n in L||(n=`BUFF_${i?"ELEMENT":""}${e}${s}`),[L[n]]};return{"proc:5:atk":{id:w["proc:5:atk"],name:"Active Regular/Elemental Attack Boost",stat:M.atk,stackType:H.Active,icons:e("ATK")},"proc:5:def":{id:w["proc:5:def"],name:"Active Regular/Elemental Defense Boost",stat:M.def,stackType:H.Active,icons:e("DEF")},"proc:5:rec":{id:w["proc:5:rec"],name:"Active Regular/Elemental Recovery Boost",stat:M.rec,stackType:H.Active,icons:e("REC")},"proc:5:crit":{id:w["proc:5:crit"],name:"Active Regular/Elemental Critical Hit Rate Boost",stat:M.crit,stackType:H.Active,icons:e("CRTRATE")}}})()),{"proc:6:bc":{id:w["proc:6:bc"],name:"Active Battle Crystal Drop Rate Boost",stat:M.bcDropRate,stackType:H.Active,icons:e=>[e&&e.value&&e.value<0?L.BUFF_BCDOWN:L.BUFF_BCDROP]},"proc:6:hc":{id:w["proc:6:hc"],name:"Active Heart Crystal Drop Rate Boost",stat:M.hcDropRate,stackType:H.Active,icons:e=>[e&&e.value&&e.value<0?L.BUFF_HCDOWN:L.BUFF_HCDROP]},"proc:6:item":{id:w["proc:6:item"],name:"Active Item Drop Rate Boost",stat:M.itemDropRate,stackType:H.Active,icons:e=>[e&&e.value&&e.value<0?L.BUFF_ITEMDOWN:L.BUFF_ITEMDROP]},"proc:7":{id:w["proc:7"],name:"Guaranteed KO Resistance",stat:M.koResistance,stackType:H.Singleton,icons:()=>[L.BUFF_KOBLK]},"proc:8:flat":{id:w["proc:8:flat"],name:"Max HP Boost (Flat Amount)",stat:M.hp,stackType:H.Singleton,icons:()=>[L.BUFF_HPUP]},"proc:8:percent":{id:w["proc:8:percent"],name:"Max HP Boost (Percentage)",stat:M.hp,stackType:H.Singleton,icons:()=>[L.BUFF_HPUP]}}),(()=>{const e=e=>a=>{let t="",i=!1,s="DOWN";a&&(a.value&&a.value>0&&(s="UP"),a.conditions&&a.conditions.targetElements&&(t=a.conditions.targetElements[0],i=!0)),"string"!=typeof t&&(t="");let n=`BUFF_${t.toUpperCase()}${e}${s}`;return t&&n in L||(n=`BUFF_${i?"ELEMENT":""}${e}${s}`),[L[n]]};return{"proc:9:atk":{id:w["proc:9:atk"],name:"Active Regular/Elemental Attack Reduction",stat:M.atk,stackType:H.Active,icons:e("ATK")},"proc:9:def":{id:w["proc:9:def"],name:"Active Regular/Elemental Defense Reduction",stat:M.def,stackType:H.Active,icons:e("DEF")},"proc:9:rec":{id:w["proc:9:rec"],name:"Active Regular/Elemental Recovery Reduction",stat:M.rec,stackType:H.Active,icons:e("REC")}}})()));var ee=Object.freeze({__proto__:null,convertProcEffectToBuffs:function(e,a){if(!e||"object"!=typeof e)throw new TypeError("effect parameter should be an object");if(!a||"object"!=typeof a)throw new TypeError("context parameter should be an object");const s=k(e)&&t(e),n=s&&J(a.reloadMapping).get(s);return"function"==typeof n?n(e,a):function(e,a){const s=k(e)&&t(e)||i.Unknown;return[{id:w.UNKNOWN_PROC_EFFECT_ID,originalId:s,effectDelay:e["effect delay time(ms)/frame"],targetType:e["target type"],targetArea:e["target area"],sources:j(a)}]}(e,a)},convertPassiveEffectToBuffs:function(e,a){if(!e||"object"!=typeof e)throw new TypeError("effect parameter should be an object");if(!a||"object"!=typeof a)throw new TypeError("context parameter should be an object");const i=W(e)&&t(e),n=i&&Q(a.reloadMapping).get(i);return"function"==typeof n?n(e,a):function(e,a){const i=W(e)&&t(e)||s.Unknown;return[{id:w.UNKNOWN_PASSIVE_EFFECT_ID,originalId:i,sources:j(a)}]}(e,a)},get BuffSource(){return S},get BuffStackType(){return H},BUFF_METADATA:Z,getMetadataForBuff:function(e,a=Z){return a&&"object"==typeof a&&Object.hasOwnProperty.call(a,e)?a[e]:void 0}}),ae=Object.freeze({__proto__:null,constants:r,parsers:ee,getMetadataForProc:F,getMetadataForPassive:v,isAttackingProcId:D,getNameForProc:h,getNameForPassive:C,isProcEffect:k,isPassiveEffect:W,combineEffectsAndDamageFrames:function(e,a){let t=[];return Array.isArray(e)&&e.length>0&&Array.isArray(a)&&e.length===a.length&&(t=e.map((e,t)=>{const i=a[t];return{delay:e["effect delay time(ms)/frame"],effect:e,frames:i,id:`${e["proc id"]||e["unknown proc id"]}`,targetArea:e["random attack"]?u.Random:e["target area"],targetType:e["target type"]}})),t},getEffectId:t,getEffectName:function(e,a={}){let i="";const s=t(e);return W(e)?i=C(s,a&&a.passive):k(e)&&(i=h(s,a&&a.proc)),i},get ProcBuffType(){return n},PASSIVE_METADATA:o,PROC_METADATA:c});var te=Object.freeze({__proto__:null,getEffectsForExtraSkill:function(e){return e&&Array.isArray(e.effects)?e.effects:[]}});var ie=Object.freeze({__proto__:null,getEffectsForItem:function(e){let a=[];if(e&&e.effect)if(Array.isArray(e.effect))a=e.effect;else if(Array.isArray(e.effect.effect)){const{effect:t,target_area:i,target_type:s}=e.effect;a=t.map(e=>{const a=Object.assign({},e);return a["target area"]=i,a["target type"]=s,a})}return a},getItemImageUrl:function(e,a){return`${e||""}/item/${a||""}`}});var se=Object.freeze({__proto__:null,getEffectsForLeaderSkill:function(e){return e&&Array.isArray(e.effects)?e.effects:[]}});var ne=Object.freeze({__proto__:null,getUnitImageFileNames:function(e,a=""){const t=`${e||""}${a||""}.png`;return{spritesheet:`unit_anime_${t}`,battleAvatar:`unit_ills_battle_${t}`,guideAvatar:`unit_ills_thum_${t}`,fullIllustration:`unit_ills_full_${t}`}},getUnitImageUrl:function(e,a){return`${e||""}/unit/img/${a||""}`}});const re="A".charCodeAt(0),oe="a".charCodeAt(0),ce="0".charCodeAt(0);function Fe(e){return"string"==typeof e&&e.split("@")[1]||e}var De=Object.freeze({__proto__:null,getEffectsForSpEnhancement:function(e){const a=[];if(e&&e.skill&&Array.isArray(e.skill.effects)){e.skill.effects.forEach(e=>{Object.keys(e).forEach(t=>{const i=e[t],s=Object.assign(Object.assign({},i),{sp_type:t});a.push(s)})})}return a},getSpCategoryName:function(e){let a;switch(+e){case 1:a=R["Parameter Boost"];break;case 2:a=R.Spark;break;case 3:a=R["Critical Hits"];break;case 4:a=R["Attack Boost"];break;case 5:a=R["BB Gauge"];break;case 6:a=R["HP Recovery"];break;case 7:a=R.Drops;break;case 8:a=R["Ailment Resistance"];break;case 9:a=R["Ailment Infliction"];break;case 10:a=R["Damage Reduction"];break;case 11:a=R.Special;break;default:a=R.Unknown}return a},spIndexToCode:function(e){let a="",t=-1;return Number.isInteger(e)&&(e>=0&&e<=25?t=e+re:e>=26&&e<=51?t=e-26+oe:e>=52&&e<=61&&(t=e-52+ce)),-1!==t&&(a=String.fromCharCode(t)),a},spCodeToIndex:function(e){let a=-1,t=-1;return e&&"string"==typeof e&&1===e.length&&(e>="A"&&e<="Z"?t=re:e>="a"&&e<="z"?t=oe-26:e>="0"&&e<="9"&&(t=ce-52)),-1!==t&&(a=e.charCodeAt(0)-t),a},getSpEntryId:Fe,getSpEntryWithId:function(e,a){const t=Fe(e);return e&&Array.isArray(a)&&a.find(e=>Fe(e&&e.id)===t)||void 0},getAllDependenciesForSpEntry:function e(a,t,i=new Set){let s=[];if(a&&a.dependency&&Array.isArray(t)&&t.length>0){const n=Fe(a.dependency),r=t.find(e=>Fe(e&&e.id)===n);if(r&&!i.has(r)){i.add(r);const a=e(r,t,i);s=[r].concat(a)}}return s},getAllEntriesThatDependOnSpEntry:function e(a,t,i=new Set){let s=[];if(a&&a.id&&Array.isArray(t)&&t.length>0){const n=a.id;(s=t.filter(e=>e.dependency&&e.dependency.includes(n)&&!i.has(e))).forEach(a=>{i.add(a);const n=e(a,t,i);s=s.concat(n)})}return s}});return e.buffs=ae,e.bursts=y,e.datamineTypes=G,e.extraSkills=te,e.items=ie,e.leaderSkills=se,e.spEnhancements=De,e.units=ne,e.version="0.7.0",e}({});
//# sourceMappingURL=index.browser.min.js.map
